#!/usr/bin/env node
/*! For license information please see bdbuilder.min.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./core/classes/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Meta": () => (/* reexport safe */ _meta__WEBPACK_IMPORTED_MODULE_0__.default),\n/* harmony export */   "Readme": () => (/* reexport safe */ _readme__WEBPACK_IMPORTED_MODULE_1__.default)\n/* harmony export */ });\n/* harmony import */ var _meta__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./meta */ "./core/classes/meta.js");\n/* harmony import */ var _readme__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./readme */ "./core/classes/readme.js");\n\r\n\n\n//# sourceURL=webpack://bdbuilder/./core/classes/index.js?')},"./core/classes/meta.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ PluginMeta)\n/* harmony export */ });\nclass PluginMeta {\r\n    constructor(config) {\r\n        if (!config || !config.hasOwnProperty("info")) throw new SyntaxError("An invalid config object was provided.");\r\n\r\n        this.config = new Map();\r\n        this.rawConfig = config;\r\n\r\n        for (const entry in config.info) {\r\n            this.config.set(entry, config.info[entry]);\r\n        }\r\n    }\r\n\r\n    toString() {\r\n        let meta = "/**";\r\n        for (const [entry, value] of this.config) {\r\n            switch(entry) {\r\n                case "name":\r\n                    meta += `\\n * @name ${value.replace(/ /g, "")}`;\r\n                    break;\r\n                case "authors":\r\n                    meta += `\\n * @author ${value.map(author => author.name).join(", ")}`;\r\n                    break;\r\n                case "github_raw":\r\n                    meta += `\\n * @updateUrl ${value}`;\r\n                    break;\r\n                case "github":\r\n                    meta += `\\n * @source ${value}`;\r\n                    break;\r\n                default:\r\n                    meta += `\\n * @${entry} ${value}`;\r\n            }\r\n        }\r\n\r\n        return meta + "\\n */";\r\n    }\r\n\r\n    [Symbol.iterator]() {\r\n        let depth = -1;\r\n        const raw = Array.from(this.config);\r\n        return {\r\n            next: () => {\r\n                depth++;\r\n                return {\r\n                    value: raw[depth],\r\n                    done: depth >= raw.length\r\n                };\r\n            },\r\n            [Symbol.toStringTag]: "Meta Iterator"\r\n        }\r\n    }\r\n}\n\n//# sourceURL=webpack://bdbuilder/./core/classes/meta.js?')},"./core/classes/readme.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "string": () => (/* binding */ string),\n/* harmony export */   "contributor": () => (/* binding */ contributor),\n/* harmony export */   "contributorsTable": () => (/* binding */ contributorsTable),\n/* harmony export */   "preview": () => (/* binding */ preview),\n/* harmony export */   "previewsPage": () => (/* binding */ previewsPage),\n/* harmony export */   "default": () => (/* binding */ Readme)\n/* harmony export */ });\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs-extra */ "fs-extra");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ "./core/utils.js");\n\r\n\r\n\r\n\r\nconst string = `\r\n# {{name}}\r\n\r\n> {{description}}\r\n<hr/>\r\n{{contributors}}\r\n{{previews}}\r\n<span>Made with <img src="https://discord.com/assets/0483f2b648dcc986d01385062052ae1c.svg" width="15" /> by <a href="https://github.com/Kyza/bdbuilder">BDBuilder</a></span>\r\n`.trim();\r\n\r\nconst contributor = `\r\n<td align="center">\r\n    <img src="{{github}}.png" width="25" /><br/>\r\n    <a href="{{github}}"><strong>{{name}}</strong></a>\r\n</td>\r\n`;\r\n\r\nconst contributorsTable = `\r\n# Contributors\r\n<table>\r\n<tr>\r\n    {{contributors}}\r\n</tr>\r\n</table>\r\n`;\r\n\r\nconst preview = `\r\n## {{name}}\r\n![image]({{src}})\r\n`;\r\n\r\nconst previewsPage = `\r\n# Previews\r\n{{previews}}\r\n`;\r\n\r\nclass Readme {\r\n    constructor(config) {\r\n        this.config = config;\r\n    }\r\n\r\n    get contributors() {\r\n        const contributors = this.config.build.release.contributors;\r\n        if (!Array.isArray(contributors) || !contributors.length) return "";\r\n\r\n        return _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(contributorsTable, {\r\n            contributors: contributors.map(e => _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(contributor, e)).join("\\n")\r\n        }) + "<br/>";\r\n    }\r\n\r\n    get previews() {\r\n        const previews = this.config.build.release.previews;\r\n\r\n        if (!Array.isArray(previews) || !previews.length) return "";\r\n\r\n        return _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(previewsPage, {\r\n            previews: previews.map(e => {\r\n                return _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(preview, {\r\n                    name: e.name,\r\n                    src: this.makeSrcLink(e)\r\n                })\r\n            }).join("<br/>\\n")\r\n        }) + "<br/>"\r\n    }\r\n\r\n    makeSrcLink(img) {\r\n        if (this.config.build.release.public) {\r\n            return _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.resolveRawGithub(this.config.info.name, `src/${img.src}`);\r\n        } else return `data:image/${path__WEBPACK_IMPORTED_MODULE_1___default().extname(img.src).slice(1)};base64,${fs_extra__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(path__WEBPACK_IMPORTED_MODULE_1___default().resolve(_utils_js__WEBPACK_IMPORTED_MODULE_2__.default.getPath(), img.src)).toString("base64")}`;\r\n    }\r\n\r\n    toString() {\r\n        let output = string;\r\n\r\n        output = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(output, this.config.info);\r\n\r\n        output = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(output, {\r\n            contributors: this.contributors\r\n        });\r\n\r\n        output = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(output, {\r\n            previews: this.previews\r\n        });\r\n\r\n        return output;\r\n    }\r\n}\n\n//# sourceURL=webpack://bdbuilder/./core/classes/readme.js?')},"./core/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "ROOT_DIR": () => (/* binding */ ROOT_DIR),\n/* harmony export */   "TEMPLATES_DIR": () => (/* binding */ TEMPLATES_DIR),\n/* harmony export */   "BUILDS_PATH": () => (/* binding */ BUILDS_PATH),\n/* harmony export */   "TEMP_PATH": () => (/* binding */ TEMP_PATH),\n/* harmony export */   "RELEASE_DIR": () => (/* binding */ RELEASE_DIR),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\nconst ROOT_DIR = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, "..", "..");\r\nconst TEMPLATES_DIR = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, "templates");\r\nconst BUILDS_PATH = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, "..", "builds");\r\nconst TEMP_PATH = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, "..", "temp");\r\nconst RELEASE_DIR = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, "..", "releases");\r\n\r\nconst CONSTANTS = {TEMPLATES_DIR, BUILDS_PATH, TEMP_PATH, ROOT_DIR, RELEASE_DIR};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CONSTANTS);\n\n//# sourceURL=webpack://bdbuilder/./core/constants.js?')},"./core/data/defaults.json":module=>{eval('module.exports = JSON.parse(\'{"build":{"production":false,"watch":false,"folder":""},"discord":{"userId":"???","username":"???"},"github":{"username":"???","branchName":"???","repo":"???"},"paths":{"bdfolder":"???","release_folder":"???"}}\');\n\n//# sourceURL=webpack://bdbuilder/./core/data/defaults.json?')},"./core/data/imports.json":module=>{eval('module.exports = JSON.parse(\'{"react-spring":"BdApi.findModuleByProps(\\\'useSpring\\\')","@discord/utils":{"joinClassNames":"BdApi.findModule(m => typeof m?.default?.default === \\\'function\\\')?.default","useForceUpdate":"BdApi.findModuleByProps(\\\'useForceUpdate\\\')?.useForceUpdate","Logger":"BdApi.findModuleByProps(\\\'setLogFn\\\')?.default","Navigation":"BdApi.findModuleByProps(\\\'replaceWith\\\')"},"@discord/components":{"Tooltip":"BdApi.findModuleByDisplayName(\\\'Tooltip\\\')","TooltipContainer":"BdApi.findModuleByProps(\\\'TooltipContainer\\\')?.TooltipContainer","TextInput":"BdApi.findModuleByDisplayName(\\\'TextInput\\\')","SlideIn":"BdApi.findModuleByDisplayName(\\\'SlideIn\\\')","SettingsNotice":"BdApi.findModuleByDisplayName(\\\'SettingsNotice\\\')","TransitionGroup":"BdApi.findModuleByDisplayName(\\\'TransitionGroup\\\')","Button":"BdApi.findModuleByProps(\\\'DropdownSizes\\\')","Flex":"BdApi.findModuleByDisplayName(\\\'Flex\\\')","Text":"BdApi.findModuleByDisplayName(\\\'Text\\\')","Card":"BdApi.findModuleByDisplayName(\\\'Card\\\')"},"@discord/modules":{"Dispatcher":"BdApi.findModuleByProps(\\\'dirtyDispatch\\\', \\\'subscribe\\\')","EmojiUtils":"BdApi.findModuleByProps(\\\'uploadEmoji\\\')","PermissionUtils":"BdApi.findModuleByProps(\\\'computePermissions\\\')","DMUtils":"BdApi.findModuleByProps(\\\'openPrivateChannel\\\')"},"@discord/stores":{"Messages":"BdApi.findModuleByProps(\\\'getMessage\\\', \\\'getMessages\\\')","Channels":"BdApi.findModuleByProps(\\\'getChannel\\\')","Guilds":"BdApi.findModuleByProps(\\\'getGuild\\\')","SelectedGuilds":"BdApi.findModuleByProps(\\\'getGuildId\\\', \\\'getLastSelectedGuildId\\\')","SelectedChannels":"BdApi.findModuleByProps(\\\'getChannelId\\\', \\\'getLastSelectedChannelId\\\')","Info":"BdApi.findModuleByProps(\\\'getSessionId\\\')","Status":"BdApi.findModuleByProps(\\\'getStatus\\\')","Users":"BdApi.findModuleByProps(\\\'getUser\\\')","SettingsStore":"BdApi.findModuleByProps(\\\'afkTimeout\\\', \\\'status\\\')","UserProfile":"BdApi.findModuleByProps(\\\'getUserProfile\\\')","Members":"BdApi.findModuleByProps(\\\'getMember\\\')","Activities":"BdApi.findModuleByProps(\\\'getActivities\\\')","Games":"BdApi.findModuleByProps(\\\'getGame\\\')","Auth":"BdApi.findModuleByProps(\\\'getId\\\', \\\'isGuest\\\')","TypingUsers":"BdApi.findModuleByProps(\\\'isTyping\\\')"},"@discord/actions":{"ProfileActions":"BdApi.findModuleByProps(\\\'fetchProfile\\\')"},"@discord/i18n":"BdApi.findModuleByProps(\\\'getLocale\\\')","@discord/constants":"BdApi.findModuleByProps(\\\'API_HOST\\\')","@discord/contextmenu":"module const ctx = Object.assign({}, BdApi.findModuleByProps(\\\'openContextMenu\\\'), BdApi.findModuleByProps(\\\'MenuItem\\\'));\\\\nctx.Menu = ctx.default;\\\\nreturn ctx;","@discord/forms":"BdApi.findModuleByProps(\\\'FormItem\\\')","@discord/scrollbars":"BdApi.findModuleByProps(\\\'ScrollerAuto\\\')","@discord/native":"BdApi.findModuleByProps(\\\'requireModule\\\')","@discord/flux":"Object.assign({}, BdApi.findModuleByProps(\\\'useStateFromStores\\\').default, BdApi.findModuleByProps(\\\'useStateFromStores\\\'))","@discord/modal":"Object.assign({}, BdApi.findModuleByProps(\\\'ModalRoot\\\'), BdApi.findModuleByProps(\\\'openModal\\\'))","@discord/connections":"BdApi.findModuleByProps(\\\'get\\\', \\\'isSupported\\\', \\\'map\\\')","@discord/sanitize":"BdApi.findModuleByProps(\\\'stringify\\\', \\\'parse\\\', \\\'encode\\\')","@discord/icons":"BdApi.findAllModules(m => m.displayName && ~m.toString().indexOf(\\\'currentColor\\\')).reduce((icons, icon) => (icons[icon.displayName] = icon, icons), {})","@discord/classes":{"Timestamp":"BdApi.findModuleByPrototypes(\\\'toDate\\\', \\\'month\\\')","Message":"BdApi.findModuleByPrototypes(\\\'getReaction\\\', \\\'isSystemDM\\\')","User":"BdApi.findModuleByPrototypes(\\\'tag\\\')","Channel":"BdApi.findModuleByPrototypes(\\\'isOwner\\\', \\\'isCategory\\\')"}}\');\n\n//# sourceURL=webpack://bdbuilder/./core/data/imports.json?')},"./core/externals.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ externals)\n/* harmony export */ });\n/* harmony import */ var _data_imports_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data/imports.json */ "./core/data/imports.json");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs-extra */ "fs-extra");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "./core/utils.js");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants */ "./core/constants.js");\n/* harmony import */ var module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! module */ "module");\n/* harmony import */ var module__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(module__WEBPACK_IMPORTED_MODULE_5__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction externals() {\r\n    const pluginPath = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.getPath();\r\n\r\n    return [\r\n        {\r\n            "react": "var BdApi.React",\r\n            "react-dom": "var BdApi.ReactDOM",\r\n            "@zlibrary": "var PluginApi",\r\n            "@zlibrary/discord": "var PluginApi.DiscordModules",\r\n            "@zlibrary/plugin": "var BasePlugin",\r\n            "https": \'var require("https")\',\r\n            "lodash": "var window._",\r\n            "betterdiscord/api": "var require(\'betterdiscord/bdapi\')",\r\n            // "kss": fs.readFileSync(path.resolve(__dirname, "kss.js"), "utf8"),\r\n            "styles": "var StyleLoader",\r\n            ...Object.keys(_data_imports_json__WEBPACK_IMPORTED_MODULE_0__).reduce((items, item) => {\r\n                items[item] = ["var Modules", item];\r\n                return items;\r\n            }, {})\r\n        },\r\n        function ({context, request}, callback) {\r\n            console.log("Context:", context, _constants__WEBPACK_IMPORTED_MODULE_4__.default.ROOT_DIR);\r\n            if (context === _constants__WEBPACK_IMPORTED_MODULE_4__.default.ROOT_DIR) {\r\n                _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.startTime = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.nanoseconds();\r\n                return callback();\r\n            }\r\n\r\n            // Check if it\'s in node_modules.\r\n            const config = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.getBuildConfig();\r\n            const nodeModulesPath = path__WEBPACK_IMPORTED_MODULE_3___default().resolve(pluginPath, "node_modules");\r\n            if (fs_extra__WEBPACK_IMPORTED_MODULE_1___default().existsSync(nodeModulesPath)) {\r\n                if (fs_extra__WEBPACK_IMPORTED_MODULE_1___default().existsSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(nodeModulesPath, request))) return callback();\r\n            }\r\n\r\n            const fullPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(context, request);\r\n            try {\r\n                if (fs_extra__WEBPACK_IMPORTED_MODULE_1___default().lstatSync(fullPath).isDirectory()) {\r\n                    // It\'s a folder. Check for index.SOMETHING.\r\n                    const files = fs_extra__WEBPACK_IMPORTED_MODULE_1___default().readdirSync(fullPath);\r\n                    console.log("Files:");\r\n                    if (files.some((file) => file.startsWith("index."))) {\r\n                        // Continue without externalizing the import\r\n                        return callback();\r\n                    }\r\n                }\r\n            } catch {}\r\n            try {\r\n                // Test if the file exists, ignore extension.\r\n                const files = fs_extra__WEBPACK_IMPORTED_MODULE_1___default().readdirSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(fullPath, ".."));\r\n                console.log("Checking files...", files);\r\n                if (files.some((file) => file.startsWith(path__WEBPACK_IMPORTED_MODULE_3___default().basename(fullPath)))) {\r\n                    // Continue without externalizing the import\r\n                    return callback();\r\n                }\r\n            } catch {}\r\n\r\n            try {\r\n                const match = Object.keys((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.nullish)(config.build.resolve.alias, {})).some(e => request.startsWith(e));\r\n                if (match) {\r\n                    return callback();\r\n                }\r\n            } catch {}\r\n\r\n            if (~module__WEBPACK_IMPORTED_MODULE_5__.builtinModules.indexOf(request)) {\r\n                return callback(null, "commonjs2 " + request);\r\n            }\r\n\r\n            try {\r\n                console.log(__webpack_require__(/*! util */ "util").inspect(config));\r\n                console.log("\\n\\nHERE:", Object.keys(config.resolve.alias), request, "\\n\\n");\r\n                if (Object.keys(config.resolve.alias).some(k => k.charAt(k.length - 1) !== "$" && request.startsWith(k))) {\r\n                    return callback();\r\n                }\r\n            } catch {}\r\n\r\n            // // Externalize to a commonjs module using the request path\r\n            // callback(null, "commonjs2 " + request);\r\n            throw new Error("Could not resolve depenency: " + request);\r\n        }\r\n    ];\r\n};\n\n//# sourceURL=webpack://bdbuilder/./core/externals.js?')},"./core/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv */ "dotenv");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sass */ "sass");\n/* harmony import */ var sass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(sass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs-extra */ "fs-extra");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var webpack__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! webpack */ "webpack");\n/* harmony import */ var webpack__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(webpack__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var js_beautify__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-beautify */ "js-beautify");\n/* harmony import */ var js_beautify__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(js_beautify__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _optimization_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./optimization.js */ "./core/optimization.js");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils.js */ "./core/utils.js");\n/* harmony import */ var _externals_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./externals.js */ "./core/externals.js");\n/* harmony import */ var yargs_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! yargs/helpers */ "yargs/helpers");\n/* harmony import */ var yargs_helpers__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(yargs_helpers__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var yargs_yargs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! yargs/yargs */ "yargs/yargs");\n/* harmony import */ var yargs_yargs__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(yargs_yargs__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./constants.js */ "./core/constants.js");\n/* harmony import */ var _plugins_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./plugins.js */ "./core/plugins.js");\n/* harmony import */ var _rules_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./rules.js */ "./core/rules.js");\n/* harmony import */ var _resolve_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./resolve.js */ "./core/resolve.js");\n/* harmony import */ var _classes__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./classes */ "./core/classes/index.js");\n/* harmony import */ var _modules__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./modules */ "./core/modules/index.js");\n/* harmony import */ var _templates_plugin_template__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./templates/plugin.template */ "./core/templates/plugin.template.js");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconsole.log("Starting Compilation.");\r\nconsole.log("Bruh. Why,")\r\n\r\nconst {argv} = yargs_yargs__WEBPACK_IMPORTED_MODULE_10___default()((0,yargs_helpers__WEBPACK_IMPORTED_MODULE_9__.hideBin)(process.argv));\r\n_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.init(argv.plugin || argv.theme, argv);\r\n(0,dotenv__WEBPACK_IMPORTED_MODULE_0__.config)();\r\n\r\n/* Ensure Directories */\r\n// fs.ensureDirSync(path.join(__dirname, "..", "releases"));\r\n// fs.ensureDirSync(path.join(__dirname, "..", "plugins"));\r\n// fs.ensureDirSync(path.join(__dirname, "..", "builds"));\r\n// fs.ensureDirSync(path.join(__dirname, "..", "temp"));\r\n\r\n\r\nconst pluginConfig = _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getAddonConfig();\r\n\r\nif (~Object.keys(argv).indexOf("plugin")) {\r\n    const buildConfig = {\r\n        mode: "production",\r\n        target: "node",\r\n        entry: _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getPath(),\r\n        output: {\r\n            clean: true,\r\n            library: "LibraryPluginHack",\r\n            libraryTarget: "commonjs2",\r\n            filename: _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getAddonConfig("main") || "index.js",\r\n            path: _constants_js__WEBPACK_IMPORTED_MODULE_11__.default.TEMP_PATH\r\n        },\r\n        watch: _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.shouldWatch,\r\n        watchOptions: {\r\n            followSymlinks: true,\r\n        },\r\n        plugins: _plugins_js__WEBPACK_IMPORTED_MODULE_12__.default,\r\n        externals: (0,_externals_js__WEBPACK_IMPORTED_MODULE_8__.default)(),\r\n        module: {\r\n            rules: (0,_rules_js__WEBPACK_IMPORTED_MODULE_13__.default)(),\r\n        },\r\n        resolve: (0,_resolve_js__WEBPACK_IMPORTED_MODULE_14__.default)(),\r\n        optimization: _optimization_js__WEBPACK_IMPORTED_MODULE_6__.default\r\n    };\r\n    _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.setBuiltConfig(buildConfig);\r\n    webpack__WEBPACK_IMPORTED_MODULE_4___default()(buildConfig, (err, stats) => {\r\n        // console.clear();\r\n        const {build, ...config} = _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getAddonConfig();\r\n\r\n        if (err) {\r\n            console.error((err.stack || err) + "\\n");\r\n            if (err.details) console.error(err.details + "\\n");\r\n            return;\r\n        }\r\n        if (stats.hasErrors()) {\r\n            const info = stats.toJson();\r\n            for (const error of info.errors) console.log(error.message + "\\n");\r\n        }\r\n        if (stats.hasWarnings()) {\r\n            const info = stats.toJson();\r\n            for (const warning of info.warnings) console.log(warning.message + "\\n");\r\n        }\r\n\r\n        if (err || stats.hasErrors()) return console.log(`Failed to build after ${Math.round((_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.nanoseconds() - _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.startTime) / 1000).toLocaleString()}s.`);\r\n\r\n        fs_extra__WEBPACK_IMPORTED_MODULE_2___default().ensureDirSync(_constants_js__WEBPACK_IMPORTED_MODULE_11__.default.TEMP_PATH);\r\n        const meta = new _classes__WEBPACK_IMPORTED_MODULE_15__.Meta(config);\r\n        // const templatePlugin = fs.readFileSync(path.join(CONSTANTS.TEMPLATES_DIR, "plugin.template.js"), "utf8");\r\n        const escapedName = config.info.name.replace(/ /g, "");\r\n        const bdFilename = `${escapedName}.plugin.js`;\r\n        const tempFile = path__WEBPACK_IMPORTED_MODULE_3___default().join(_constants_js__WEBPACK_IMPORTED_MODULE_11__.default.TEMP_PATH, config.main || "index.js");\r\n\r\n        const builderOutput = _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.format(_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getBuilderConfig().build.folder, {\r\n            plugin: escapedName\r\n        });\r\n        const outputFolder = fs_extra__WEBPACK_IMPORTED_MODULE_2___default().existsSync(builderOutput) ? builderOutput : _constants_js__WEBPACK_IMPORTED_MODULE_11__.default.BUILDS_PATH;\r\n        const outputPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(outputFolder, bdFilename);\r\n\r\n        if (argv.build) {\r\n            if (argv.readme || (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getBuilderConfig)().build.readme) fs_extra__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(outputFolder, "README.md"), new _classes__WEBPACK_IMPORTED_MODULE_15__.Readme(pluginConfig).toString(), "utf8");\r\n        } else {\r\n            try {\r\n                fs_extra__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(outputPath);\r\n            } catch (error) {\r\n                console.log("Failed to remove old file:\\n", error);\r\n            }\r\n        }\r\n\r\n        fs_extra__WEBPACK_IMPORTED_MODULE_2___default().ensureFileSync(tempFile);\r\n        let builtCode = fs_extra__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(tempFile, "utf-8");\r\n        const split = builtCode.split("\\n");\r\n        split.splice(2, 0, _modules__WEBPACK_IMPORTED_MODULE_16__.default.join("\\n"));\r\n        builtCode = split.join("\\n");\r\n\r\n        if (pluginConfig.build.zlibrary) {\r\n            builtCode = `${meta}\\n${_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.format(_templates_plugin_template__WEBPACK_IMPORTED_MODULE_17__.default, {pluginConfig: JSON.stringify(pluginConfig, null, "\\t"), builtCode})}`;\r\n        } else {\r\n            builtCode = builtCode.replace(\r\n                "module.exports.LibraryPluginHack = __webpack_exports__",\r\n                "module.exports = __webpack_exports__.default ?? __webpack_exports__"\r\n            );\r\n\r\n            builtCode = `${meta}\\n${builtCode}`;\r\n        }\r\n\r\n        builtCode = (0,js_beautify__WEBPACK_IMPORTED_MODULE_5__.js)(builtCode, {indent_with_tabs: true}).replace(/\\n{2,}/g, "\\n");\r\n\r\n        fs_extra__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(outputPath, builtCode);\r\n\r\n        console.log(`Built in ${Math.round((_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.nanoseconds() - _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.startTime) / 1000).toLocaleString()}s.`);\r\n        if (argv.release) {\r\n            try {\r\n                const config = (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getAddonConfig)("build.release");\r\n                const info = (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getAddonConfig)("info");\r\n                if (typeof config !== "object") throw new Error("Invalid release configuration");\r\n\r\n                const releaseDir = (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.nullish)(config.public ? path__WEBPACK_IMPORTED_MODULE_3___default().join(process.env.RELEASE_FOLDER, info.name) : void 0, path__WEBPACK_IMPORTED_MODULE_3___default().join(_constants_js__WEBPACK_IMPORTED_MODULE_11__.default.RELEASE_DIR, info.name));\r\n                if (fs_extra__WEBPACK_IMPORTED_MODULE_2___default().existsSync(releaseDir)) fs_extra__WEBPACK_IMPORTED_MODULE_2___default().emptyDirSync(releaseDir);\r\n                else fs_extra__WEBPACK_IMPORTED_MODULE_2___default().mkdirSync(releaseDir);\r\n\r\n                if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.nullish)(config.readme, true)) {\r\n                    fs_extra__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(releaseDir, "README.md"), new _classes__WEBPACK_IMPORTED_MODULE_15__.Readme(pluginConfig).toString(), "utf8");\r\n                }\r\n\r\n                if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.nullish)(config.source, true)) {\r\n                    fs_extra__WEBPACK_IMPORTED_MODULE_2___default().copy(_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getPath(), path__WEBPACK_IMPORTED_MODULE_3___default().join(releaseDir, "src"), {recursive: true, filter: src => src.indexOf("node_modules") < 0});\r\n                }\r\n\r\n                fs_extra__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(releaseDir, bdFilename), builtCode);\r\n            } catch (error) {\r\n                console.error(`Release build failed!\\n`, error);\r\n            }\r\n        } else if (pluginConfig.build.copy && !argv.build) {\r\n            fs_extra__WEBPACK_IMPORTED_MODULE_2___default().ensureDirSync(process.env.BDFOLDER);\r\n            fs_extra__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(\r\n                path__WEBPACK_IMPORTED_MODULE_3___default().resolve(path__WEBPACK_IMPORTED_MODULE_3___default().join(process.env.BDFOLDER, bdFilename)),\r\n                builtCode\r\n            );\r\n        }\r\n        if (!pluginConfig.build.production) return;\r\n        try {\r\n            fs_extra__WEBPACK_IMPORTED_MODULE_2___default().emptyDirSync(_constants_js__WEBPACK_IMPORTED_MODULE_11__.default.TEMP_PATH);\r\n            fs_extra__WEBPACK_IMPORTED_MODULE_2___default().rmdirSync(_constants_js__WEBPACK_IMPORTED_MODULE_11__.default.TEMP_PATH, {recursive: true});\r\n        } catch (error) {\r\n            console.error("Failed to remove tmp path:", error);\r\n        }\r\n    });\r\n} else {\r\n    throw new Error("Themes loader is not implemented yet.");\r\n    // try {\r\n    //     sass.render({\r\n    //         data\r\n    //     })\r\n    // } catch (error) {\r\n\r\n    // }\r\n}\n\n//# sourceURL=webpack://bdbuilder/./core/index.js?')},"./core/loaders/css.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ css)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./core/utils.js");\n\r\n\r\nfunction css() {\r\n    return {\r\n        loader: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.resolveModule)("css-loader"),\r\n        options: {\r\n            importLoaders: true,\r\n            modules: {\r\n                localIdentName: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.nullish)((0,_utils__WEBPACK_IMPORTED_MODULE_0__.getAddonConfig)("info.name"), "").replace(/ /g, "") + "-[name]-[local]"\r\n            }\r\n        }\r\n    };\r\n};\n\n//# sourceURL=webpack://bdbuilder/./core/loaders/css.js?')},"./core/loaders/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "stylesheet": () => (/* binding */ stylesheet),\n/* harmony export */   "kss": () => (/* binding */ kss),\n/* harmony export */   "css": () => (/* reexport safe */ _css__WEBPACK_IMPORTED_MODULE_1__.default),\n/* harmony export */   "js": () => (/* reexport safe */ _js__WEBPACK_IMPORTED_MODULE_2__.default)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./css */ "./core/loaders/css.js");\n/* harmony import */ var _js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./js */ "./core/loaders/js.js");\n\r\n\r\nconst stylesheet = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, __filename.endsWith(".min.js") ? "stylesheet.min" : "stylesheet");\r\nconst kss = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, __filename.endsWith(".min.js") ? "kss.min" : "kss");\r\n\r\n\n\n//# sourceURL=webpack://bdbuilder/./core/loaders/index.js?')},"./core/loaders/js.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ js)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ "./core/utils.js");\n\r\n\r\nfunction js() {\r\n    return _utils_js__WEBPACK_IMPORTED_MODULE_0__.default.isDevelopment\r\n        ? {\r\n            loader: (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.resolveModule)("babel-loader"),\r\n            options: {\r\n                presets: [\r\n                    ["@babel/typescript", {esModuleInterop: true}]\r\n                ],\r\n                plugins: [\r\n                    "@babel/plugin-transform-react-jsx",\r\n                    "@babel/plugin-proposal-class-properties",\r\n                    ["minify-dead-code-elimination"]\r\n                ]\r\n            }\r\n        }\r\n        : {\r\n            loader: (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.resolveModule)("@sucrase/webpack-loader"),\r\n            options: {\r\n                production: true,\r\n                transforms: ["jsx", "typescript"]\r\n            }\r\n        };\r\n}\n\n//# sourceURL=webpack://bdbuilder/./core/loaders/js.js?')},"./core/modules/discord.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ createDiscordModules)\n/* harmony export */ });\n/* harmony import */ var _data_imports_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/imports.json */ "./core/data/imports.json");\n\r\n\r\nfunction createDiscordModules() {\r\n    return `\r\n        function ___createMemoize___(instance, name, value) {\r\n            value = value();\r\n            Object.defineProperty(instance, name, {\r\n                value,\r\n                configurable: true\r\n            });\r\n\r\n            return value;\r\n        };\r\n        const Modules = {\r\n        ${Object.keys(_data_imports_json__WEBPACK_IMPORTED_MODULE_0__).reduce((modules, module) => {\r\n        if (typeof _data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module] === "string") {\r\n            const isModule = _data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module].startsWith("module");\r\n            modules.push(`get \'${module}\'() {return ___createMemoize___(this, \'${module}\', ${isModule ? `() => {${_data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module].slice("module".length + 1)}}` : `() => ${_data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module]}`})}`);\r\n        } else {\r\n            modules.push(`\'${module}\': {${Object.keys(_data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module]).map(e => {\r\n                e = e.trim();\r\n                const isModule = _data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module][e].startsWith("module");\r\n                return `get \'${e}\'() {return ___createMemoize___(this, \'${e}\', ${isModule ? `() => {${_data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module][e].slice("module".length + 1)}}` : `() => ${_data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module][e]}`})}`;\r\n            }).join(",\\n")}}`);\r\n        }\r\n\r\n        return modules;\r\n    }, []).join(",\\n")}\r\n    };\\n`;\r\n}\n\n//# sourceURL=webpack://bdbuilder/./core/modules/discord.js?')},"./core/modules/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _discord__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./discord */ "./core/modules/discord.js");\n/* harmony import */ var _stylesheet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stylesheet */ "./core/modules/stylesheet.js");\n\r\n\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([\r\n    (0,_stylesheet__WEBPACK_IMPORTED_MODULE_1__.default)(),\r\n    (0,_discord__WEBPACK_IMPORTED_MODULE_0__.default)()\r\n]);\n\n//# sourceURL=webpack://bdbuilder/./core/modules/index.js?')},"./core/modules/stylesheet.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ createStyleSheet)\n/* harmony export */ });\nfunction createStyleSheet() {\r\n    return `class StyleLoader {\r\n        static styles = "";\r\n        static element = null;\r\n\r\n        static append(module, css) {\r\n            this.styles += \\`/* \\${module} */\\\\n\\${css}\\`;\r\n        }\r\n\r\n        static inject(name = config.info.name) {\r\n            if(this.element) this.element.remove();\r\n            this.element = document.head.appendChild(Object.assign(document.createElement("style"), {id: name, textContent: this.styles}));\r\n        }\r\n\r\n        static remove() {\r\n            if (this.element) {\r\n                this.element.remove();\r\n                this.element = null;\r\n            }\r\n        }\r\n    }`;\r\n}\n\n//# sourceURL=webpack://bdbuilder/./core/modules/stylesheet.js?')},"./core/optimization.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var terser_webpack_plugin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! terser-webpack-plugin */ "terser-webpack-plugin");\n/* harmony import */ var terser_webpack_plugin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(terser_webpack_plugin__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    minimize: true,\r\n    minimizer: [\r\n        new (terser_webpack_plugin__WEBPACK_IMPORTED_MODULE_0___default())({\r\n            terserOptions: {\r\n                module: true,\r\n                compress: {\r\n                    defaults: false,\r\n                },\r\n                mangle: false,\r\n                parse: {},\r\n                rename: {},\r\n                format: {\r\n                    comments: false,\r\n                    max_line_len: false,\r\n                    semicolons: true,\r\n                    beautify: true\r\n                }\r\n            }\r\n        })\r\n    ]\r\n});\n\n//# sourceURL=webpack://bdbuilder/./core/optimization.js?')},"./core/plugins.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var webpack__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webpack */ "webpack");\n/* harmony import */ var webpack__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(webpack__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\n\r\nconst Plugins = [\r\n    new webpack__WEBPACK_IMPORTED_MODULE_0__.ProvidePlugin({\r\n        React: ["react"],\r\n        ReactDOM: ["react-dom"]\r\n    }),\r\n    new webpack__WEBPACK_IMPORTED_MODULE_0__.ProgressPlugin({\r\n        activeModules: false,\r\n        entries: true,\r\n        modules: true,\r\n        modulesCount: 5000,\r\n        profile: false,\r\n        dependencies: true,\r\n        dependenciesCount: 10000,\r\n        percentBy: null\r\n    })\r\n];\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Plugins);\n\n//# sourceURL=webpack://bdbuilder/./core/plugins.js?')},"./core/resolve.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ resolve)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ "./core/utils.js");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\r\n\r\n\r\nfunction resolve() {\r\n    const pluginAliases = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.nullish)((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.getAddonConfig)("build.aliases"), {});\r\n\r\n    const ret = {\r\n        extensions: [\r\n            ".js",\r\n            ".mjs",\r\n            ".jsx",\r\n            ".ts",\r\n            ".tsx",\r\n            ".coffee",\r\n            ".css",\r\n            ".scss",\r\n            ".sass",\r\n            ".less",\r\n            ".styl",\r\n            ".html",\r\n            ".json"\r\n        ],\r\n        alias: Object.keys(pluginAliases).reduce((aliases, alias) => {\r\n            aliases[alias] = path__WEBPACK_IMPORTED_MODULE_1___default().resolve(_utils_js__WEBPACK_IMPORTED_MODULE_0__.default.getPath(), pluginAliases[alias]);\r\n            return aliases;\r\n        }, {\r\n            common: path__WEBPACK_IMPORTED_MODULE_1___default().resolve(__dirname, "..", "common")\r\n        })\r\n    };\r\n\r\n    return ret;\r\n};\n\n//# sourceURL=webpack://bdbuilder/./core/resolve.js?')},"./core/rules.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ rules)\n/* harmony export */ });\n/* harmony import */ var _loaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loaders */ "./core/loaders/index.js");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./core/utils.js");\n\r\n\r\n\r\nfunction rules() {\r\n    const cssLoader = _loaders__WEBPACK_IMPORTED_MODULE_0__.css;\r\n\r\n    return [\r\n        {\r\n            test: /\\.css$/i,\r\n            use: [_loaders__WEBPACK_IMPORTED_MODULE_0__.stylesheet, cssLoader, _loaders__WEBPACK_IMPORTED_MODULE_0__.kss]\r\n        },\r\n        {\r\n            test: /\\.s[ac]ss$/i,\r\n            use: [_loaders__WEBPACK_IMPORTED_MODULE_0__.stylesheet, cssLoader, _loaders__WEBPACK_IMPORTED_MODULE_0__.kss, (0,_utils__WEBPACK_IMPORTED_MODULE_1__.resolveModule)("sass-loader")]\r\n        },\r\n        {\r\n            test: /\\.styl$/i,\r\n            use: [_loaders__WEBPACK_IMPORTED_MODULE_0__.stylesheet, cssLoader, _loaders__WEBPACK_IMPORTED_MODULE_0__.kss, (0,_utils__WEBPACK_IMPORTED_MODULE_1__.resolveModule)("stylus-loader")]\r\n        },\r\n        {\r\n            test: /\\.less$/i,\r\n            use: [_loaders__WEBPACK_IMPORTED_MODULE_0__.stylesheet, cssLoader, _loaders__WEBPACK_IMPORTED_MODULE_0__.kss, (0,_utils__WEBPACK_IMPORTED_MODULE_1__.resolveModule)("less-loader")]\r\n        },\r\n        {\r\n            test: /\\.m?(j|t)sx?$/i,\r\n            exclude: /node_modules/,\r\n            use: (0,_loaders__WEBPACK_IMPORTED_MODULE_0__.js)(),\r\n        },\r\n        {\r\n            test: /\\.html$/i,\r\n            exclude: /node_modules/,\r\n            use: [(0,_utils__WEBPACK_IMPORTED_MODULE_1__.resolveModule)("raw-loader")]\r\n        },\r\n        {\r\n            test: /\\.coffee?$/i,\r\n            exclude: /node_modules/,\r\n            use: [\r\n                (0,_loaders__WEBPACK_IMPORTED_MODULE_0__.js)(),\r\n                (0,_utils__WEBPACK_IMPORTED_MODULE_1__.resolveModule)("coffee-loader")\r\n            ]// cool not gonna test it have fun square\r\n        },\r\n        // {\r\n        //     test: /\\.json$/i,\r\n        //     exclude: /node_modules/,\r\n        //     type: "javascript/auto",\r\n        //     use: json\r\n        // } // Thanks square for your help!\r\n    ];\r\n};\n\n//# sourceURL=webpack://bdbuilder/./core/rules.js?')},"./core/templates/plugin.template.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (`\r\n/*@cc_on\r\n@if (@_jscript)\r\n    \r\n    // Offer to self-install for clueless users that try to run this directly.\r\n    var shell = WScript.CreateObject("WScript.Shell");\r\n    var fs = new ActiveXObject("Scripting.FileSystemObject");\r\n    var pathPlugins = shell.ExpandEnvironmentStrings("%APPDATA%\\BetterDiscord\\plugins");\r\n    var pathSelf = WScript.ScriptFullName;\r\n    // Put the user at ease by addressing them in the first person\r\n    shell.Popup("It looks like you\'ve mistakenly tried to run me directly. \\n(Don\'t do that!)", 0, "I\'m a plugin for BetterDiscord", 0x30);\r\n    if (fs.GetParentFolderName(pathSelf) === fs.GetAbsolutePathName(pathPlugins)) {\r\n        shell.Popup("I\'m in the correct folder already.", 0, "I\'m already installed", 0x40);\r\n    } else if (!fs.FolderExists(pathPlugins)) {\r\n        shell.Popup("I can\'t find the BetterDiscord plugins folder.\\nAre you sure it\'s even installed?", 0, "Can\'t install myself", 0x10);\r\n    } else if (shell.Popup("Should I copy myself to BetterDiscord\'s plugins folder for you?", 0, "Do you need some help?", 0x34) === 6) {\r\n        fs.CopyFile(pathSelf, fs.BuildPath(pathPlugins, fs.GetFileName(pathSelf)), true);\r\n        // Show the user where to put plugins in the future\r\n        shell.Exec("explorer " + pathPlugins);\r\n        shell.Popup("I\'m installed!", 0, "Successfully installed", 0x40);\r\n    }\r\n    WScript.Quit();\r\n@else@*/\r\n\r\n/* Generated Code */\r\n\r\nconst config = {{pluginConfig}};\r\n\r\nfunction buildPlugin([BasePlugin, PluginApi]) {\r\n    const module = {exports: {}};\r\n\r\n    {{builtCode}}\r\n\r\n    const PluginExports = module.exports.LibraryPluginHack;\r\n    return PluginExports?.__esModule ? PluginExports.default : PluginExports;\r\n}\r\n\r\nmodule.exports = window.hasOwnProperty("ZeresPluginLibrary")\r\n    ? buildPlugin(window.ZeresPluginLibrary.buildPlugin(config))\r\n    : class {\r\n        getName() {return config.info.name;}\r\n        getAuthor() {return config.info.authors.map(a => a.name).join(", ");}\r\n        getDescription() {return \\`\\${config.info.description}. __**ZeresPluginLibrary was not found! This plugin will not work!**__\\`;}\r\n        getVersion() {return config.info.version;}\r\n        load() {\r\n            BdApi.showConfirmationModal(\r\n                "Library plugin is needed", \r\n                [\\`The library plugin needed for \\${config.info.name} is missing. Please click Download to install it.\\`], \r\n                {\r\n                    confirmText: "Download",\r\n                    cancelText: "Cancel",\r\n                    onConfirm: () => {\r\n                        require("request").get("https://rauenzi.github.io/BDPluginLibrary/release/0PluginLibrary.plugin.js", async (error, response, body) => {\r\n                            if (error) return require("electron").shell.openExternal("https://betterdiscord.net/ghdl?url=https://raw.githubusercontent.com/rauenzi/BDPluginLibrary/master/release/0PluginLibrary.plugin.js");\r\n                            await new Promise(r => require("fs").writeFile(require("path").join(BdApi.Plugins.folder, "0PluginLibrary.plugin.js"), body, r));\r\n                        });\r\n                    }\r\n                }\r\n            );\r\n        }\r\n        start() {}\r\n        stop() {}\r\n    };\r\n\r\n/*@end@*/`);\n\n//# sourceURL=webpack://bdbuilder/./core/templates/plugin.template.js?')},"./core/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "nullish": () => (/* binding */ nullish),\n/* harmony export */   "isNil": () => (/* binding */ isNil),\n/* harmony export */   "resolveType": () => (/* binding */ resolveType),\n/* harmony export */   "upperFirst": () => (/* binding */ upperFirst),\n/* harmony export */   "formatString": () => (/* binding */ formatString),\n/* harmony export */   "resolveModule": () => (/* binding */ resolveModule),\n/* harmony export */   "resolveRawGithub": () => (/* binding */ resolveRawGithub),\n/* harmony export */   "nanoseconds": () => (/* binding */ nanoseconds),\n/* harmony export */   "init": () => (/* binding */ init),\n/* harmony export */   "setBuiltConfig": () => (/* binding */ setBuiltConfig),\n/* harmony export */   "getBuildConfig": () => (/* binding */ getBuildConfig),\n/* harmony export */   "getPath": () => (/* binding */ getPath),\n/* harmony export */   "getAddonConfig": () => (/* binding */ getAddonConfig),\n/* harmony export */   "shouldWatch": () => (/* binding */ shouldWatch),\n/* harmony export */   "readBuildConfig": () => (/* binding */ readBuildConfig),\n/* harmony export */   "getBuilderConfig": () => (/* binding */ getBuilderConfig),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs-extra */ "fs-extra");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _data_defaults_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data/defaults.json */ "./core/data/defaults.json");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ "lodash");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\n\r\n\r\n\r\n\r\n\r\nlet addonPath = "", argv = {}, builtConfig = {};\r\n\r\nfunction nullish(what, def) {\r\n    return isNil(what) ? def : what;\r\n};\r\n\r\nfunction isNil(what) {\r\n    return typeof what === "undefined" || Object.is(what, null);\r\n}\r\n\r\nfunction resolveType(rawType, plural = true) {\r\n    switch (rawType.toLowerCase()) {\r\n        /* Themes */\r\n        case (plural && "theme"): return "themes";\r\n        case (plural && "themes"): return "themes";\r\n        case (!plural && "theme"): return "theme";\r\n        case (!plural && "themes"): return "theme";\r\n\r\n        /* Plugins */\r\n        case (plural && "plugin"): return "plugin";\r\n        case (plural && "plugins"): return "plugins";\r\n        case (!plural && "plugin"): return "plugin";\r\n        case (!plural && "plugins"): return "plugin";\r\n\r\n        default: throw new Error("Could not resolve " + rawType + " as addon type.");\r\n    }\r\n};\r\n\r\nfunction upperFirst(string) {\r\n    return string[0].toUpperCase() + string.slice(1);\r\n};\r\n\r\nfunction formatString(string, options, open = "{{", close = "}}") {\r\n    for (const option in options) {\r\n        string = string.replace(new RegExp(`${open}${option}${close}`, "g"), options[option]);\r\n    }\r\n\r\n    return string;\r\n};\r\n\r\nformatString.bind = string => {\r\n    string.format = Function.prototype.bind.call(formatString, string);\r\n    return string;\r\n};\r\n\r\nfunction resolveModule(mod) {\r\n    return path__WEBPACK_IMPORTED_MODULE_0___default().resolve(path__WEBPACK_IMPORTED_MODULE_0___default().join(__dirname, "..", "node_modules", mod));\r\n};\r\n\r\nfunction resolveRawGithub(pluginName, path) {\r\n    return `https://raw.githubusercontent.com/${process.env.GITHUB_NAME}/${process.env.GITHUB_REPO}/${process.env.GITHUB_BRANCH}/${pluginName}/${path}`;\r\n};\r\n\r\nfunction nanoseconds() {\r\n    const hrTime = process.hrtime();\r\n    return hrTime[0] * 1000000000 + hrTime[1];\r\n};\r\n\r\nfunction init(addon, argvObj) {\r\n    console.log(process.cwd(), addon);\r\n    addonPath = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(process.cwd(), addon, "src");\r\n    argv = argvObj;\r\n};\r\n\r\nfunction setBuiltConfig(cfg) {\r\n    builtConfig = cfg;\r\n};\r\n\r\nfunction getBuildConfig() {\r\n    return builtConfig;\r\n};\r\n\r\nfunction getPath() {\r\n    return addonPath;\r\n};\r\n\r\nfunction getAddonConfig(propetyPath = "") {\r\n    const config = fs_extra__WEBPACK_IMPORTED_MODULE_1___default().readJSONSync(path__WEBPACK_IMPORTED_MODULE_0___default().resolve(addonPath, "package.json"));\r\n    return propetyPath.split(".").reduce((cfg, item) => {\r\n        if (isNil(item) || isNil(cfg)) return cfg;\r\n        return item ? cfg[item] : cfg;\r\n    }, config);\r\n};\r\n\r\nfunction shouldWatch() {\r\n    const watch = getAddonConfig("build.watch");\r\n\r\n    return nullish(nullish(argv.watch, watch), false);\r\n};\r\n\r\nfunction readBuildConfig() {\r\n    const configPath = path__WEBPACK_IMPORTED_MODULE_0___default().join(process.cwd(), "bdbuilder.config.json");\r\n    try {\r\n        return fs_extra__WEBPACK_IMPORTED_MODULE_1___default().readJSONSync(configPath);\r\n    } catch (error) {\r\n        console.error(error);\r\n        throw new Error("Could not resolve build config at " + configPath);\r\n    }\r\n};\r\n\r\nfunction getBuilderConfig() {\r\n    const config = readBuildConfig();\r\n    return lodash__WEBPACK_IMPORTED_MODULE_3___default().merge(_data_defaults_json__WEBPACK_IMPORTED_MODULE_2__, config);\r\n};\r\n\r\nconst Utils = {\r\n    resolveType,\r\n    upperFirst,\r\n    nullish,\r\n    formatString,\r\n    format: formatString,\r\n    resolveModule,\r\n    nanoseconds,\r\n    getAddonConfig,\r\n    init,\r\n    getPath,\r\n    setBuiltConfig,\r\n    getBuildConfig,\r\n    getBuilderConfig: getBuilderConfig,\r\n    resolveRawGithub,\r\n    startTime: nanoseconds(),\r\n    get argv() {return argv;},\r\n    get isRelease() {\r\n        return nullish(argv.release, getBuilderConfig().build.release);\r\n    },\r\n    get shouldWatch() {\r\n        return nullish(argv.watch, getBuilderConfig().build.watch);\r\n    },\r\n    get isDevelopment() {\r\n        return nullish(this.isRelease, nullish(argv.production, getAddonConfig("build.production")));\r\n    }\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Utils);\r\n\n\n//# sourceURL=webpack://bdbuilder/./core/utils.js?')},dotenv:_=>{_.exports=require("dotenv")},"fs-extra":_=>{_.exports=require("fs-extra")},"js-beautify":_=>{_.exports=require("js-beautify")},lodash:_=>{_.exports=require("lodash")},module:_=>{_.exports=require("module")},path:_=>{_.exports=require("path")},sass:_=>{_.exports=require("sass")},"terser-webpack-plugin":_=>{_.exports=require("terser-webpack-plugin")},util:_=>{_.exports=require("util")},webpack:_=>{_.exports=require("webpack")},"yargs/helpers":_=>{_.exports=require("yargs/helpers")},"yargs/yargs":_=>{_.exports=require("yargs/yargs")}},__webpack_module_cache__={};function __webpack_require__(_){var e=__webpack_module_cache__[_];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[_]={exports:{}};return __webpack_modules__[_](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=_=>{var e=_&&_.__esModule?()=>_.default:()=>_;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(_,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(_,r)&&Object.defineProperty(_,r,{enumerable:!0,get:e[r]})},__webpack_require__.o=(_,e)=>Object.prototype.hasOwnProperty.call(_,e),__webpack_require__.r=_=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./core/index.js");module.exports=__webpack_exports__})();