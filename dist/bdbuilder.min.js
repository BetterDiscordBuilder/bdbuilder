#!/usr/bin/env node
/*! For license information please see bdbuilder.min.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./core/classes/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Meta": () => (/* reexport safe */ _meta__WEBPACK_IMPORTED_MODULE_0__.default),\n/* harmony export */   "Readme": () => (/* reexport safe */ _readme__WEBPACK_IMPORTED_MODULE_1__.default)\n/* harmony export */ });\n/* harmony import */ var _meta__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./meta */ "./core/classes/meta.js");\n/* harmony import */ var _readme__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./readme */ "./core/classes/readme.js");\n\n\n\n//# sourceURL=webpack://bdbuilder/./core/classes/index.js?')},"./core/classes/meta.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ PluginMeta)\n/* harmony export */ });\nclass PluginMeta {\n    constructor(config) {\n        if (!config || !config.hasOwnProperty("info")) throw new SyntaxError("An invalid config object was provided.");\n\n        this.config = new Map();\n        this.rawConfig = config;\n\n        for (const entry in config.info) {\n            this.config.set(entry, config.info[entry]);\n        }\n    }\n\n    toString() {\n        let meta = "/**";\n        for (const [entry, value] of this.config) {\n            switch(entry) {\n                case "name":\n                    meta += `\\n * @name ${value.replace(/ /g, "")}`;\n                    break;\n                case "authors":\n                    meta += `\\n * @author ${value.map(author => author.name).join(", ")}`;\n                    break;\n                case "github_raw":\n                    meta += `\\n * @updateUrl ${value}`;\n                    break;\n                case "github":\n                    meta += `\\n * @source ${value}`;\n                    break;\n                default:\n                    meta += `\\n * @${entry} ${value}`;\n            }\n        }\n\n        return meta + "\\n */";\n    }\n\n    [Symbol.iterator]() {\n        let depth = -1;\n        const raw = Array.from(this.config);\n        return {\n            next: () => {\n                depth++;\n                return {\n                    value: raw[depth],\n                    done: depth >= raw.length\n                };\n            },\n            [Symbol.toStringTag]: "Meta Iterator"\n        }\n    }\n}\n\n//# sourceURL=webpack://bdbuilder/./core/classes/meta.js?')},"./core/classes/readme.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "string": () => (/* binding */ string),\n/* harmony export */   "contributor": () => (/* binding */ contributor),\n/* harmony export */   "contributorsTable": () => (/* binding */ contributorsTable),\n/* harmony export */   "preview": () => (/* binding */ preview),\n/* harmony export */   "previewsPage": () => (/* binding */ previewsPage),\n/* harmony export */   "default": () => (/* binding */ Readme)\n/* harmony export */ });\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs-extra */ "fs-extra");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ "./core/utils.js");\n\n\n\n\nconst string = `\n# {{name}}\n\n> {{description}}\n<hr/>\n{{contributors}}\n{{previews}}\n<span>Made with <img src="https://discord.com/assets/0483f2b648dcc986d01385062052ae1c.svg" width="15" /> by <a href="https://github.com/Kyza/bdbuilder">BDBuilder</a></span>\n`.trim();\n\nconst contributor = `\n<td align="center">\n    <img src="{{github}}.png" width="25" /><br/>\n    <a href="{{github}}"><strong>{{name}}</strong></a>\n</td>\n`;\n\nconst contributorsTable = `\n# Contributors\n<table>\n<tr>\n    {{contributors}}\n</tr>\n</table>\n`;\n\nconst preview = `\n## {{name}}\n![image]({{src}})\n`;\n\nconst previewsPage = `\n# Previews\n{{previews}}\n`;\n\nclass Readme {\n    constructor(config) {\n        this.config = config;\n    }\n\n    get contributors() {\n        const contributors = this.config.build.release.contributors;\n        if (!Array.isArray(contributors) || !contributors.length) return "";\n\n        return _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(contributorsTable, {\n            contributors: contributors.map(e => _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(contributor, e)).join("\\n")\n        }) + "<br/>";\n    }\n\n    get previews() {\n        const previews = this.config.build.release.previews;\n\n        if (!Array.isArray(previews) || !previews.length) return "";\n\n        return _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(previewsPage, {\n            previews: previews.map(e => {\n                return _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(preview, {\n                    name: e.name,\n                    src: this.makeSrcLink(e)\n                })\n            }).join("<br/>\\n")\n        }) + "<br/>"\n    }\n\n    makeSrcLink(img) {\n        if (this.config.build.release.public) {\n            return _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.resolveRawGithub(this.config.info.name, `src/${img.src}`);\n        } else return `data:image/${path__WEBPACK_IMPORTED_MODULE_1___default().extname(img.src).slice(1)};base64,${fs_extra__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(path__WEBPACK_IMPORTED_MODULE_1___default().resolve(_utils_js__WEBPACK_IMPORTED_MODULE_2__.default.getPath(), img.src)).toString("base64")}`;\n    }\n\n    toString() {\n        let output = string;\n\n        output = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(output, this.config.info);\n\n        output = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(output, {\n            contributors: this.contributors\n        });\n\n        output = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.format(output, {\n            previews: this.previews\n        });\n\n        return output;\n    }\n}\n\n//# sourceURL=webpack://bdbuilder/./core/classes/readme.js?')},"./core/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "ROOT_DIR": () => (/* binding */ ROOT_DIR),\n/* harmony export */   "TEMPLATES_DIR": () => (/* binding */ TEMPLATES_DIR),\n/* harmony export */   "BUILDS_PATH": () => (/* binding */ BUILDS_PATH),\n/* harmony export */   "TEMP_PATH": () => (/* binding */ TEMP_PATH),\n/* harmony export */   "RELEASE_DIR": () => (/* binding */ RELEASE_DIR),\n/* harmony export */   "DEBUG_LOGS": () => (/* binding */ DEBUG_LOGS),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./core/utils.js");\n\n\n\nconst ROOT_DIR = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getBuilderConfig)().basePath);\nconst TEMPLATES_DIR = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, "templates");\nconst BUILDS_PATH = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, "..", "builds");\nconst TEMP_PATH = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, "..", "temp");\nconst RELEASE_DIR = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, "..", "releases");\nconst DEBUG_LOGS = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, "..", "logs");\n\nconst CONSTANTS = {TEMPLATES_DIR, BUILDS_PATH, TEMP_PATH, ROOT_DIR, RELEASE_DIR, DEBUG_LOGS};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CONSTANTS);\n\n//# sourceURL=webpack://bdbuilder/./core/constants.js?')},"./core/data/defaults.json":module=>{eval('module.exports = JSON.parse(\'{"basePath":"..","build":{"production":false,"watch":false,"entry":"./plugins/[name]","output":"./builds","filename":"[name].plugin.js","debug":false},"discord":{"userId":"???","username":"???"},"github":{"username":"???","branch":"???","repo":"???"},"paths":{"bdfolder":"???","release_folder":"???"}}\');\n\n//# sourceURL=webpack://bdbuilder/./core/data/defaults.json?')},"./core/data/imports.json":module=>{eval('module.exports = JSON.parse(\'{"react-spring":"BdApi.findModuleByProps(\\\'useSpring\\\')","@discord/utils":{"joinClassNames":"BdApi.findModule(m => typeof m?.default?.default === \\\'function\\\')?.default","useForceUpdate":"BdApi.findModuleByProps(\\\'useForceUpdate\\\')?.useForceUpdate","Logger":"BdApi.findModuleByProps(\\\'setLogFn\\\')?.default","Navigation":"BdApi.findModuleByProps(\\\'replaceWith\\\')"},"@discord/components":{"Tooltip":"BdApi.findModuleByDisplayName(\\\'Tooltip\\\')","TooltipContainer":"BdApi.findModuleByProps(\\\'TooltipContainer\\\')?.TooltipContainer","TextInput":"BdApi.findModuleByDisplayName(\\\'TextInput\\\')","SlideIn":"BdApi.findModuleByDisplayName(\\\'SlideIn\\\')","SettingsNotice":"BdApi.findModuleByDisplayName(\\\'SettingsNotice\\\')","TransitionGroup":"BdApi.findModuleByDisplayName(\\\'TransitionGroup\\\')","Button":"BdApi.findModuleByProps(\\\'DropdownSizes\\\')","Flex":"BdApi.findModuleByDisplayName(\\\'Flex\\\')","Text":"BdApi.findModuleByDisplayName(\\\'Text\\\')","Card":"BdApi.findModuleByDisplayName(\\\'Card\\\')"},"@discord/modules":{"Dispatcher":"BdApi.findModuleByProps(\\\'dirtyDispatch\\\', \\\'subscribe\\\')","EmojiUtils":"BdApi.findModuleByProps(\\\'uploadEmoji\\\')","PermissionUtils":"BdApi.findModuleByProps(\\\'computePermissions\\\')","DMUtils":"BdApi.findModuleByProps(\\\'openPrivateChannel\\\')"},"@discord/stores":{"Messages":"BdApi.findModuleByProps(\\\'getMessage\\\', \\\'getMessages\\\')","Channels":"BdApi.findModuleByProps(\\\'getChannel\\\')","Guilds":"BdApi.findModuleByProps(\\\'getGuild\\\')","SelectedGuilds":"BdApi.findModuleByProps(\\\'getGuildId\\\', \\\'getLastSelectedGuildId\\\')","SelectedChannels":"BdApi.findModuleByProps(\\\'getChannelId\\\', \\\'getLastSelectedChannelId\\\')","Info":"BdApi.findModuleByProps(\\\'getSessionId\\\')","Status":"BdApi.findModuleByProps(\\\'getStatus\\\')","Users":"BdApi.findModuleByProps(\\\'getUser\\\')","SettingsStore":"BdApi.findModuleByProps(\\\'afkTimeout\\\', \\\'status\\\')","UserProfile":"BdApi.findModuleByProps(\\\'getUserProfile\\\')","Members":"BdApi.findModuleByProps(\\\'getMember\\\')","Activities":"BdApi.findModuleByProps(\\\'getActivities\\\')","Games":"BdApi.findModuleByProps(\\\'getGame\\\')","Auth":"BdApi.findModuleByProps(\\\'getId\\\', \\\'isGuest\\\')","TypingUsers":"BdApi.findModuleByProps(\\\'isTyping\\\')"},"@discord/actions":{"ProfileActions":"BdApi.findModuleByProps(\\\'fetchProfile\\\')","GuildActions":"BdApi.findModuleByProps(\\\'requestMembersById\\\')"},"@discord/i18n":"BdApi.findModuleByProps(\\\'getLocale\\\')","@discord/constants":"BdApi.findModuleByProps(\\\'API_HOST\\\')","@discord/contextmenu":"module const ctx = Object.assign({}, BdApi.findModuleByProps(\\\'openContextMenu\\\'), BdApi.findModuleByProps(\\\'MenuItem\\\'));\\\\nctx.Menu = ctx.default;\\\\nreturn ctx;","@discord/forms":"BdApi.findModuleByProps(\\\'FormItem\\\')","@discord/scrollbars":"BdApi.findModuleByProps(\\\'ScrollerAuto\\\')","@discord/native":"BdApi.findModuleByProps(\\\'requireModule\\\')","@discord/flux":"Object.assign({}, BdApi.findModuleByProps(\\\'useStateFromStores\\\').default, BdApi.findModuleByProps(\\\'useStateFromStores\\\'))","@discord/modal":"Object.assign({}, BdApi.findModuleByProps(\\\'ModalRoot\\\'), BdApi.findModuleByProps(\\\'openModal\\\'))","@discord/connections":"BdApi.findModuleByProps(\\\'get\\\', \\\'isSupported\\\', \\\'map\\\')","@discord/sanitize":"BdApi.findModuleByProps(\\\'stringify\\\', \\\'parse\\\', \\\'encode\\\')","@discord/icons":"BdApi.findAllModules(m => m.displayName && ~m.toString().indexOf(\\\'currentColor\\\')).reduce((icons, icon) => (icons[icon.displayName] = icon, icons), {})","@discord/classes":{"Timestamp":"BdApi.findModuleByPrototypes(\\\'toDate\\\', \\\'month\\\')","Message":"BdApi.findModuleByPrototypes(\\\'getReaction\\\', \\\'isSystemDM\\\')","User":"BdApi.findModuleByPrototypes(\\\'tag\\\')","Channel":"BdApi.findModuleByPrototypes(\\\'isOwner\\\', \\\'isCategory\\\')"}}\');\n\n//# sourceURL=webpack://bdbuilder/./core/data/imports.json?')},"./core/externals.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ externals)\n/* harmony export */ });\n/* harmony import */ var _data_imports_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data/imports.json */ "./core/data/imports.json");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs-extra */ "fs-extra");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "./core/utils.js");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants */ "./core/constants.js");\n/* harmony import */ var module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! module */ "module");\n/* harmony import */ var module__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(module__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\nfunction externals() {\n    const pluginPath = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.getPath();\n\n    return [\n        {\n            "react": "var BdApi.React",\n            "react-dom": "var BdApi.ReactDOM",\n            "@zlibrary": "var PluginApi",\n            "@zlibrary/discord": "var PluginApi.DiscordModules",\n            "@zlibrary/plugin": "var BasePlugin",\n            "https": \'var require("https")\',\n            "lodash": "var window._",\n            "betterdiscord/api": "var require(\'betterdiscord/bdapi\')",\n            // "kss": fs.readFileSync(path.resolve(__dirname, "kss.js"), "utf8"),\n            "styles": "var StyleLoader",\n            ...Object.keys(_data_imports_json__WEBPACK_IMPORTED_MODULE_0__).reduce((items, item) => {\n                items[item] = ["var Modules", item];\n                return items;\n            }, {})\n        },\n        function ({context, request}, callback) {\n            if (request === pluginPath || context === pluginPath || _constants__WEBPACK_IMPORTED_MODULE_4__.default.ROOT_DIR === context) {\n                _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.startTime = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.nanoseconds();\n                return callback();\n            }\n            // Check if it\'s in node_modules.\n            const config = _utils_js__WEBPACK_IMPORTED_MODULE_2__.default.getBuildConfig();\n            const nodeModulesPath = path__WEBPACK_IMPORTED_MODULE_3___default().resolve(pluginPath, "node_modules");\n            if (fs_extra__WEBPACK_IMPORTED_MODULE_1___default().existsSync(nodeModulesPath)) {\n                if (fs_extra__WEBPACK_IMPORTED_MODULE_1___default().existsSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(nodeModulesPath, request))) return callback();\n            }\n\n            const fullPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(context, request);\n            try {\n                if (fs_extra__WEBPACK_IMPORTED_MODULE_1___default().lstatSync(fullPath).isDirectory()) {\n                    // It\'s a folder. Check for index.SOMETHING.\n                    const files = fs_extra__WEBPACK_IMPORTED_MODULE_1___default().readdirSync(fullPath);\n                    if (files.some((file) => file.startsWith("index."))) {\n                        // Continue without externalizing the import\n                        return callback();\n                    }\n                }\n            } catch {}\n            try {\n                // Test if the file exists, ignore extension.\n                const files = fs_extra__WEBPACK_IMPORTED_MODULE_1___default().readdirSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(fullPath, ".."));\n                if (files.some((file) => file.startsWith(path__WEBPACK_IMPORTED_MODULE_3___default().basename(fullPath)))) {\n                    // Continue without externalizing the import\n                    return callback();\n                }\n            } catch {}\n\n            try {\n                const match = Object.keys((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.nullish)(config.build.resolve.alias, {})).some(e => request.startsWith(e));\n                if (match) {\n                    return callback();\n                }\n            } catch {}\n\n            if (~module__WEBPACK_IMPORTED_MODULE_5__.builtinModules.indexOf(request)) {\n                return callback(null, "commonjs2 " + request);\n            }\n\n            try {\n                if (Object.keys(config.resolve.alias).some(k => k.charAt(k.length - 1) !== "$" && request.startsWith(k))) {\n                    return callback();\n                }\n            } catch {}\n\n            // // Externalize to a commonjs module using the request path\n            // callback(null, "commonjs2 " + request);\n            throw new Error("Could not resolve depenency: " + request);\n        }\n    ];\n};\n\n//# sourceURL=webpack://bdbuilder/./core/externals.js?')},"./core/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv */ "dotenv");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sass */ "sass");\n/* harmony import */ var sass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(sass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs-extra */ "fs-extra");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var webpack__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! webpack */ "webpack");\n/* harmony import */ var webpack__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(webpack__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var js_beautify__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-beautify */ "js-beautify");\n/* harmony import */ var js_beautify__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(js_beautify__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _optimization_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./optimization.js */ "./core/optimization.js");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils.js */ "./core/utils.js");\n/* harmony import */ var _externals_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./externals.js */ "./core/externals.js");\n/* harmony import */ var yargs_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! yargs/helpers */ "yargs/helpers");\n/* harmony import */ var yargs_helpers__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(yargs_helpers__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var yargs_yargs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! yargs/yargs */ "yargs/yargs");\n/* harmony import */ var yargs_yargs__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(yargs_yargs__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./constants.js */ "./core/constants.js");\n/* harmony import */ var _plugins_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./plugins.js */ "./core/plugins.js");\n/* harmony import */ var _rules_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./rules.js */ "./core/rules.js");\n/* harmony import */ var _resolve_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./resolve.js */ "./core/resolve.js");\n/* harmony import */ var _classes__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./classes */ "./core/classes/index.js");\n/* harmony import */ var _modules__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./modules */ "./core/modules/index.js");\n/* harmony import */ var _templates_plugin_template__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./templates/plugin.template */ "./core/templates/plugin.template.js");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./logger.js */ "./core/logger.js");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconsole.log("Starting Compilation.");\n\nconst {argv} = yargs_yargs__WEBPACK_IMPORTED_MODULE_10___default()((0,yargs_helpers__WEBPACK_IMPORTED_MODULE_9__.hideBin)(process.argv));\n_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.init(argv.plugin || argv.theme, argv);\n(0,dotenv__WEBPACK_IMPORTED_MODULE_0__.config)();\n\n/* Ensure Directories */\n// fs.ensureDirSync(path.join(__dirname, "..", "releases"));\n// fs.ensureDirSync(path.join(__dirname, "..", "plugins"));\n// fs.ensureDirSync(path.join(__dirname, "..", "builds"));\n// fs.ensureDirSync(path.join(__dirname, "..", "temp"));\n\n\nconst pluginConfig = _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getAddonConfig();\n\nif (~Object.keys(argv).indexOf("plugin")) {\n    const buildConfig = {\n        mode: "production",\n        target: "node",\n        entry: _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getPath(),\n        output: {\n            clean: true,\n            library: "LibraryPluginHack",\n            libraryTarget: "commonjs2",\n            filename: _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getAddonConfig("main") || "index.js",\n            path: _constants_js__WEBPACK_IMPORTED_MODULE_11__.default.TEMP_PATH\n        },\n        watch: _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.shouldWatch,\n        watchOptions: {\n            followSymlinks: true,\n        },\n        plugins: _plugins_js__WEBPACK_IMPORTED_MODULE_12__.default,\n        externals: (0,_externals_js__WEBPACK_IMPORTED_MODULE_8__.default)(),\n        module: {\n            rules: (0,_rules_js__WEBPACK_IMPORTED_MODULE_13__.default)(),\n        },\n        resolve: (0,_resolve_js__WEBPACK_IMPORTED_MODULE_14__.default)(),\n        optimization: _optimization_js__WEBPACK_IMPORTED_MODULE_6__.default\n    };\n    _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.setBuiltConfig(buildConfig);\n    webpack__WEBPACK_IMPORTED_MODULE_4___default()(buildConfig, (err, stats) => {\n        // console.clear();\n        const {build, ...config} = _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getAddonConfig();\n        const builderConfig = _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getBuilderConfig();\n\n        if (err) {\n            _logger_js__WEBPACK_IMPORTED_MODULE_18__.default.error((err.stack || err) + "\\n");\n            if (err.details) _logger_js__WEBPACK_IMPORTED_MODULE_18__.default.error(err.details + "\\n");\n            return;\n        }\n        if (stats.hasErrors()) {\n            const info = stats.toJson();\n            for (const error of info.errors) _logger_js__WEBPACK_IMPORTED_MODULE_18__.default.error(error.message + "\\n");\n        }\n        if (stats.hasWarnings()) {\n            const info = stats.toJson();\n            for (const warning of info.warnings) _logger_js__WEBPACK_IMPORTED_MODULE_18__.default.warn(warning.message + "\\n");\n        }\n\n        if (err || stats.hasErrors()) throw new Error(`Failed to build after ${Math.round((_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.nanoseconds() - _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.startTime) / 1000).toLocaleString()}s.`);\n\n        fs_extra__WEBPACK_IMPORTED_MODULE_2___default().ensureDirSync(_constants_js__WEBPACK_IMPORTED_MODULE_11__.default.TEMP_PATH);\n        const meta = new _classes__WEBPACK_IMPORTED_MODULE_15__.Meta(config);\n        const escapedName = config.info.name.replace(/ /g, "");\n        const bdFilename = _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.format(builderConfig.build.filename, {\n            name: escapedName\n        }, "[", "]");\n        const tempFile = path__WEBPACK_IMPORTED_MODULE_3___default().join(_constants_js__WEBPACK_IMPORTED_MODULE_11__.default.TEMP_PATH, config.main || "index.js");\n\n        const builderOutput = path__WEBPACK_IMPORTED_MODULE_3___default().resolve(process.cwd(), _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.format(builderConfig.build.output, {\n            name: escapedName\n        }, "[", "]"));\n        if (!fs_extra__WEBPACK_IMPORTED_MODULE_2___default().existsSync(builderOutput)) fs_extra__WEBPACK_IMPORTED_MODULE_2___default().ensureDir(builderOutput);\n        const outputFolder = builderOutput;\n        const outputPath = path__WEBPACK_IMPORTED_MODULE_3___default().resolve(outputFolder, bdFilename);\n\n        if (argv.build) {\n            if (argv.readme || builderConfig.build.readme) fs_extra__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(outputFolder, "README.md"), new _classes__WEBPACK_IMPORTED_MODULE_15__.Readme(pluginConfig).toString(), "utf8");\n        } else {\n            try {\n                fs_extra__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(outputPath);\n            } catch (error) {\n                _logger_js__WEBPACK_IMPORTED_MODULE_18__.default.error("Failed to remove old file:\\n", error);\n            }\n        }\n\n        fs_extra__WEBPACK_IMPORTED_MODULE_2___default().ensureFileSync(tempFile);\n        let builtCode = fs_extra__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(tempFile, "utf-8");\n        const split = builtCode.split("\\n");\n        split.splice(2, 0, _modules__WEBPACK_IMPORTED_MODULE_16__.default.join("\\n"));\n        builtCode = split.join("\\n");\n\n        if (pluginConfig.build.zlibrary) {\n            builtCode = `${meta}\\n${_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.format(_templates_plugin_template__WEBPACK_IMPORTED_MODULE_17__.default, {pluginConfig: JSON.stringify(pluginConfig, null, "\\t"), builtCode})}`;\n        } else {\n            builtCode = builtCode.replace(\n                "module.exports.LibraryPluginHack = __webpack_exports__",\n                "module.exports = __webpack_exports__.default ?? __webpack_exports__"\n            );\n\n            builtCode = `${meta}\\n${builtCode}`;\n        }\n\n        builtCode = (0,js_beautify__WEBPACK_IMPORTED_MODULE_5__.js)(builtCode, {indent_with_tabs: true}).replace(/\\n{2,}/g, "\\n");\n\n        fs_extra__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(outputPath, builtCode);\n\n        _logger_js__WEBPACK_IMPORTED_MODULE_18__.default.log(`Built in ${Math.round((_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.nanoseconds() - _utils_js__WEBPACK_IMPORTED_MODULE_7__.default.startTime) / 1000).toLocaleString()}s.`);\n        if (argv.release) {\n            try {\n                const config = (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getAddonConfig)("build.release");\n                const info = (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getAddonConfig)("info");\n                if (typeof config !== "object") throw new Error("Invalid release configuration");\n\n                const releaseDir = (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.nullish)(config.public ? path__WEBPACK_IMPORTED_MODULE_3___default().join(process.env.RELEASE_FOLDER, info.name) : void 0, path__WEBPACK_IMPORTED_MODULE_3___default().join(_constants_js__WEBPACK_IMPORTED_MODULE_11__.default.RELEASE_DIR, info.name));\n                if (fs_extra__WEBPACK_IMPORTED_MODULE_2___default().existsSync(releaseDir)) fs_extra__WEBPACK_IMPORTED_MODULE_2___default().emptyDirSync(releaseDir);\n                else fs_extra__WEBPACK_IMPORTED_MODULE_2___default().mkdirSync(releaseDir);\n\n                if (config.readme ?? true) {\n                    fs_extra__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(releaseDir, "README.md"), new _classes__WEBPACK_IMPORTED_MODULE_15__.Readme(pluginConfig).toString(), "utf8");\n                }\n\n                if (config.source ?? true) {\n                    fs_extra__WEBPACK_IMPORTED_MODULE_2___default().copy(_utils_js__WEBPACK_IMPORTED_MODULE_7__.default.getPath(), path__WEBPACK_IMPORTED_MODULE_3___default().join(releaseDir, "src"), {recursive: true, filter: src => src.indexOf("node_modules") < 0});\n                }\n\n                fs_extra__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(releaseDir, bdFilename), builtCode);\n            } catch (error) {\n                _logger_js__WEBPACK_IMPORTED_MODULE_18__.default.error(`Release build failed!\\n`, error);\n            }\n        } else if (builderConfig.build.install) {\n            fs_extra__WEBPACK_IMPORTED_MODULE_2___default().ensureDirSync(path__WEBPACK_IMPORTED_MODULE_3___default().join(builderConfig.paths.bdfolder, "plugins"));\n            fs_extra__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(\n                path__WEBPACK_IMPORTED_MODULE_3___default().resolve(path__WEBPACK_IMPORTED_MODULE_3___default().join(builderConfig.paths.bdfolder, "plugins", bdFilename)),\n                builtCode\n            );\n        }\n        if (!pluginConfig.build.production) return;\n        try {\n            fs_extra__WEBPACK_IMPORTED_MODULE_2___default().emptyDirSync(_constants_js__WEBPACK_IMPORTED_MODULE_11__.default.TEMP_PATH);\n            fs_extra__WEBPACK_IMPORTED_MODULE_2___default().rmdirSync(_constants_js__WEBPACK_IMPORTED_MODULE_11__.default.TEMP_PATH, {recursive: true});\n        } catch (error) {\n            _logger_js__WEBPACK_IMPORTED_MODULE_18__.default.error("Failed to clear tmp path:", error);\n        }\n    });\n} else {\n    throw new Error("Themes loader is not implemented yet.");\n    // try {\n    //     sass.render({\n    //         data\n    //     })\n    // } catch (error) {\n\n    // }\n}\n\n\n//# sourceURL=webpack://bdbuilder/./core/index.js?')},"./core/loaders/css.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ css)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./core/utils.js");\n\n\nfunction css() {\n    return {\n        loader: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.resolveModule)("css-loader"),\n        options: {\n            importLoaders: true,\n            modules: {\n                localIdentName: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.nullish)((0,_utils__WEBPACK_IMPORTED_MODULE_0__.getAddonConfig)("info.name"), "").replace(/ /g, "") + "-[name]-[local]"\n            }\n        }\n    };\n};\n\n//# sourceURL=webpack://bdbuilder/./core/loaders/css.js?')},"./core/loaders/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "stylesheet": () => (/* binding */ stylesheet),\n/* harmony export */   "kss": () => (/* binding */ kss),\n/* harmony export */   "css": () => (/* reexport safe */ _css__WEBPACK_IMPORTED_MODULE_1__.default),\n/* harmony export */   "js": () => (/* reexport safe */ _js__WEBPACK_IMPORTED_MODULE_2__.default)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./css */ "./core/loaders/css.js");\n/* harmony import */ var _js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./js */ "./core/loaders/js.js");\n\n\nconst stylesheet = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, __filename.endsWith(".min.js") ? "stylesheet.min" : "stylesheet");\nconst kss = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, __filename.endsWith(".min.js") ? "kss.min" : "kss");\n\n\n\n//# sourceURL=webpack://bdbuilder/./core/loaders/index.js?')},"./core/loaders/js.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ js)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ "./core/utils.js");\n\n\nfunction js() {\n    return _utils_js__WEBPACK_IMPORTED_MODULE_0__.default.isDevelopment\n        ? {\n            loader: (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.resolveModule)("babel-loader"),\n            options: {\n                presets: [\n                    ["@babel/typescript", {esModuleInterop: true}]\n                ],\n                plugins: [\n                    "@babel/plugin-transform-react-jsx",\n                    "@babel/plugin-proposal-class-properties",\n                    ["minify-dead-code-elimination"]\n                ]\n            }\n        }\n        : {\n            loader: (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.resolveModule)("@sucrase/webpack-loader"),\n            options: {\n                production: true,\n                transforms: ["jsx", "typescript"]\n            }\n        };\n}\n\n//# sourceURL=webpack://bdbuilder/./core/loaders/js.js?')},"./core/logger.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs-extra */ "fs-extra");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants */ "./core/constants.js");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./core/utils.js");\n\n\n\n\n\nconst Logger = new class Logger {\n    constructor() {\n        const config = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getBuilderConfig)();\n        fs_extra__WEBPACK_IMPORTED_MODULE_0___default().ensureDirSync(_constants__WEBPACK_IMPORTED_MODULE_2__.default.DEBUG_LOGS);\n        if (config.debug) this.stream = fs_extra__WEBPACK_IMPORTED_MODULE_0___default().createWriteStream(path__WEBPACK_IMPORTED_MODULE_1___default().join(_constants__WEBPACK_IMPORTED_MODULE_2__.default.DEBUG_LOGS, `${new Date().toLocaleDateString().replace(/\\//, "g")}.log`), "utf8");\n    }\n\n    _log(type = "MESSAGE:", ...message) {\n        const args = [new Date().toLocaleTimeString(), type, ...message];\n        console.log.apply(null, args);\n        if (this.stream) {\n            this.stream.write(args.join(" "));\n        }\n    }\n\n    log(...message) {\n        return this._log("MESSAGE:", ...message);\n    }\n\n    warn(...message) {\n        return this._log("WARN:", ...message);\n    }\n\n    error(...message) {\n        return this._log("ERROR:", ...message);\n    }\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Logger);\n\n//# sourceURL=webpack://bdbuilder/./core/logger.js?')},"./core/modules/discord.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ createDiscordModules)\n/* harmony export */ });\n/* harmony import */ var _data_imports_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/imports.json */ "./core/data/imports.json");\n\n\nfunction createDiscordModules() {\n    return `\n        function ___createMemoize___(instance, name, value) {\n            value = value();\n            Object.defineProperty(instance, name, {\n                value,\n                configurable: true\n            });\n\n            return value;\n        };\n        const Modules = {\n        ${Object.keys(_data_imports_json__WEBPACK_IMPORTED_MODULE_0__).reduce((modules, module) => {\n        if (typeof _data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module] === "string") {\n            const isModule = _data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module].startsWith("module");\n            modules.push(`get \'${module}\'() {return ___createMemoize___(this, \'${module}\', ${isModule ? `() => {${_data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module].slice("module".length + 1)}}` : `() => ${_data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module]}`})}`);\n        } else {\n            modules.push(`\'${module}\': {${Object.keys(_data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module]).map(e => {\n                e = e.trim();\n                const isModule = _data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module][e].startsWith("module");\n                return `get \'${e}\'() {return ___createMemoize___(this, \'${e}\', ${isModule ? `() => {${_data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module][e].slice("module".length + 1)}}` : `() => ${_data_imports_json__WEBPACK_IMPORTED_MODULE_0__[module][e]}`})}`;\n            }).join(",\\n")}}`);\n        }\n\n        return modules;\n    }, []).join(",\\n")}\n    };\\n`;\n}\n\n//# sourceURL=webpack://bdbuilder/./core/modules/discord.js?')},"./core/modules/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _discord__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./discord */ "./core/modules/discord.js");\n/* harmony import */ var _stylesheet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stylesheet */ "./core/modules/stylesheet.js");\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([\n    (0,_stylesheet__WEBPACK_IMPORTED_MODULE_1__.default)(),\n    (0,_discord__WEBPACK_IMPORTED_MODULE_0__.default)()\n]);\n\n//# sourceURL=webpack://bdbuilder/./core/modules/index.js?')},"./core/modules/stylesheet.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ createStyleSheet)\n/* harmony export */ });\nfunction createStyleSheet() {\n    return `class StyleLoader {\n        static styles = "";\n        static element = null;\n\n        static append(module, css) {\n            this.styles += \\`/* \\${module} */\\\\n\\${css}\\`;\n        }\n\n        static inject(name = config.info.name) {\n            if(this.element) this.element.remove();\n            this.element = document.head.appendChild(Object.assign(document.createElement("style"), {id: name, textContent: this.styles}));\n        }\n\n        static remove() {\n            if (this.element) {\n                this.element.remove();\n                this.element = null;\n            }\n        }\n    }`;\n}\n\n//# sourceURL=webpack://bdbuilder/./core/modules/stylesheet.js?')},"./core/optimization.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var terser_webpack_plugin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! terser-webpack-plugin */ "terser-webpack-plugin");\n/* harmony import */ var terser_webpack_plugin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(terser_webpack_plugin__WEBPACK_IMPORTED_MODULE_0__);\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    minimize: true,\n    minimizer: [\n        new (terser_webpack_plugin__WEBPACK_IMPORTED_MODULE_0___default())({\n            terserOptions: {\n                module: true,\n                compress: {\n                    defaults: false,\n                },\n                mangle: false,\n                parse: {},\n                rename: {},\n                format: {\n                    comments: false,\n                    max_line_len: false,\n                    semicolons: true,\n                    beautify: true\n                }\n            }\n        })\n    ]\n});\n\n//# sourceURL=webpack://bdbuilder/./core/optimization.js?')},"./core/plugins.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var webpack__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webpack */ "webpack");\n/* harmony import */ var webpack__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(webpack__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./core/utils.js");\n\n\n\nconst Plugins = [\n    new webpack__WEBPACK_IMPORTED_MODULE_0__.ProvidePlugin({\n        React: ["react"],\n        ReactDOM: ["react-dom"]\n    }),\n    !_utils__WEBPACK_IMPORTED_MODULE_1__.default.isProduction && new webpack__WEBPACK_IMPORTED_MODULE_0__.ProgressPlugin({\n        activeModules: false,\n        entries: true,\n        modules: true,\n        modulesCount: 5000,\n        profile: false,\n        dependencies: true,\n        dependenciesCount: 10000,\n        percentBy: null\n    })\n].filter(Boolean);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Plugins);\n\n//# sourceURL=webpack://bdbuilder/./core/plugins.js?')},"./core/resolve.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ resolve)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ "./core/utils.js");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nfunction resolve() {\n    const pluginAliases = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.nullish)((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.getAddonConfig)("build.aliases"), {});\n\n    const ret = {\n        extensions: [\n            ".js",\n            ".mjs",\n            ".jsx",\n            ".ts",\n            ".tsx",\n            ".coffee",\n            ".css",\n            ".scss",\n            ".sass",\n            ".less",\n            ".styl",\n            ".html",\n            ".json"\n        ],\n        alias: Object.keys(pluginAliases).reduce((aliases, alias) => {\n            aliases[alias] = path__WEBPACK_IMPORTED_MODULE_1___default().resolve(_utils_js__WEBPACK_IMPORTED_MODULE_0__.default.getPath(), pluginAliases[alias]);\n            return aliases;\n        }, {\n            common: path__WEBPACK_IMPORTED_MODULE_1___default().resolve(__dirname, "..", "common")\n        })\n    };\n\n    return ret;\n};\n\n//# sourceURL=webpack://bdbuilder/./core/resolve.js?')},"./core/rules.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ rules)\n/* harmony export */ });\n/* harmony import */ var _loaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loaders */ "./core/loaders/index.js");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./core/utils.js");\n\n\n\nfunction rules() {\n    const cssLoader = _loaders__WEBPACK_IMPORTED_MODULE_0__.css;\n\n    return [\n        {\n            test: /\\.css$/i,\n            use: [_loaders__WEBPACK_IMPORTED_MODULE_0__.stylesheet, cssLoader, _loaders__WEBPACK_IMPORTED_MODULE_0__.kss]\n        },\n        {\n            test: /\\.s[ac]ss$/i,\n            use: [_loaders__WEBPACK_IMPORTED_MODULE_0__.stylesheet, cssLoader, _loaders__WEBPACK_IMPORTED_MODULE_0__.kss, (0,_utils__WEBPACK_IMPORTED_MODULE_1__.resolveModule)("sass-loader")]\n        },\n        {\n            test: /\\.styl$/i,\n            use: [_loaders__WEBPACK_IMPORTED_MODULE_0__.stylesheet, cssLoader, _loaders__WEBPACK_IMPORTED_MODULE_0__.kss, (0,_utils__WEBPACK_IMPORTED_MODULE_1__.resolveModule)("stylus-loader")]\n        },\n        {\n            test: /\\.less$/i,\n            use: [_loaders__WEBPACK_IMPORTED_MODULE_0__.stylesheet, cssLoader, _loaders__WEBPACK_IMPORTED_MODULE_0__.kss, (0,_utils__WEBPACK_IMPORTED_MODULE_1__.resolveModule)("less-loader")]\n        },\n        {\n            test: /\\.m?(j|t)sx?$/i,\n            exclude: /node_modules/,\n            use: (0,_loaders__WEBPACK_IMPORTED_MODULE_0__.js)(),\n        },\n        {\n            test: /\\.html$/i,\n            exclude: /node_modules/,\n            use: [(0,_utils__WEBPACK_IMPORTED_MODULE_1__.resolveModule)("raw-loader")]\n        },\n        {\n            test: /\\.coffee?$/i,\n            exclude: /node_modules/,\n            use: [\n                (0,_loaders__WEBPACK_IMPORTED_MODULE_0__.js)(),\n                (0,_utils__WEBPACK_IMPORTED_MODULE_1__.resolveModule)("coffee-loader")\n            ]// cool not gonna test it have fun square\n        },\n        // {\n        //     test: /\\.json$/i,\n        //     exclude: /node_modules/,\n        //     type: "javascript/auto",\n        //     use: json\n        // } // Thanks square for your help!\n    ];\n};\n\n//# sourceURL=webpack://bdbuilder/./core/rules.js?')},"./core/templates/plugin.template.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (`\n/*@cc_on\n@if (@_jscript)\n    \n    // Offer to self-install for clueless users that try to run this directly.\n    var shell = WScript.CreateObject("WScript.Shell");\n    var fs = new ActiveXObject("Scripting.FileSystemObject");\n    var pathPlugins = shell.ExpandEnvironmentStrings("%APPDATA%\\\\BetterDiscord\\\\plugins");\n    var pathSelf = WScript.ScriptFullName;\n    // Put the user at ease by addressing them in the first person\n    shell.Popup("It looks like you\'ve mistakenly tried to run me directly. \\\\n(Don\'t do that!)", 0, "I\'m a plugin for BetterDiscord", 0x30);\n    if (fs.GetParentFolderName(pathSelf) === fs.GetAbsolutePathName(pathPlugins)) {\n        shell.Popup("I\'m in the correct folder already.", 0, "I\'m already installed", 0x40);\n    } else if (!fs.FolderExists(pathPlugins)) {\n        shell.Popup("I can\'t find the BetterDiscord plugins folder.\\\\nAre you sure it\'s even installed?", 0, "Can\'t install myself", 0x10);\n    } else if (shell.Popup("Should I copy myself to BetterDiscord\'s plugins folder for you?", 0, "Do you need some help?", 0x34) === 6) {\n        fs.CopyFile(pathSelf, fs.BuildPath(pathPlugins, fs.GetFileName(pathSelf)), true);\n        // Show the user where to put plugins in the future\n        shell.Exec("explorer " + pathPlugins);\n        shell.Popup("I\'m installed!", 0, "Successfully installed", 0x40);\n    }\n    WScript.Quit();\n@else@*/\n\n/* Generated Code */\n\nconst config = {{pluginConfig}};\n\nfunction buildPlugin([BasePlugin, PluginApi]) {\n    const module = {exports: {}};\n\n    {{builtCode}}\n\n    const PluginExports = module.exports.LibraryPluginHack;\n    return PluginExports?.__esModule ? PluginExports.default : PluginExports;\n}\n\nmodule.exports = window.hasOwnProperty("ZeresPluginLibrary")\n    ? buildPlugin(window.ZeresPluginLibrary.buildPlugin(config))\n    : class {\n        getName() {return config.info.name;}\n        getAuthor() {return config.info.authors.map(a => a.name).join(", ");}\n        getDescription() {return \\`\\${config.info.description}. __**ZeresPluginLibrary was not found! This plugin will not work!**__\\`;}\n        getVersion() {return config.info.version;}\n        load() {\n            BdApi.showConfirmationModal(\n                "Library plugin is needed", \n                [\\`The library plugin needed for \\${config.info.name} is missing. Please click Download to install it.\\`], \n                {\n                    confirmText: "Download",\n                    cancelText: "Cancel",\n                    onConfirm: () => {\n                        require("request").get("https://rauenzi.github.io/BDPluginLibrary/release/0PluginLibrary.plugin.js", async (error, response, body) => {\n                            if (error) return require("electron").shell.openExternal("https://betterdiscord.net/ghdl?url=https://raw.githubusercontent.com/rauenzi/BDPluginLibrary/master/release/0PluginLibrary.plugin.js");\n                            await new Promise(r => require("fs").writeFile(require("path").join(BdApi.Plugins.folder, "0PluginLibrary.plugin.js"), body, r));\n                        });\n                    }\n                }\n            );\n        }\n        start() {}\n        stop() {}\n    };\n\n/*@end@*/`);\n\n//# sourceURL=webpack://bdbuilder/./core/templates/plugin.template.js?')},"./core/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "nullish": () => (/* binding */ nullish),\n/* harmony export */   "isNil": () => (/* binding */ isNil),\n/* harmony export */   "resolveType": () => (/* binding */ resolveType),\n/* harmony export */   "upperFirst": () => (/* binding */ upperFirst),\n/* harmony export */   "formatString": () => (/* binding */ formatString),\n/* harmony export */   "resolveModule": () => (/* binding */ resolveModule),\n/* harmony export */   "resolveRawGithub": () => (/* binding */ resolveRawGithub),\n/* harmony export */   "nanoseconds": () => (/* binding */ nanoseconds),\n/* harmony export */   "init": () => (/* binding */ init),\n/* harmony export */   "setBuiltConfig": () => (/* binding */ setBuiltConfig),\n/* harmony export */   "getBuildConfig": () => (/* binding */ getBuildConfig),\n/* harmony export */   "getPath": () => (/* binding */ getPath),\n/* harmony export */   "getAddonConfig": () => (/* binding */ getAddonConfig),\n/* harmony export */   "shouldWatch": () => (/* binding */ shouldWatch),\n/* harmony export */   "readBuildConfig": () => (/* binding */ readBuildConfig),\n/* harmony export */   "getBuilderConfig": () => (/* binding */ getBuilderConfig),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs-extra */ "fs-extra");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _data_defaults_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data/defaults.json */ "./core/data/defaults.json");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ "lodash");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var yargs_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! yargs/helpers */ "yargs/helpers");\n/* harmony import */ var yargs_helpers__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(yargs_helpers__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var yargs_yargs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! yargs/yargs */ "yargs/yargs");\n/* harmony import */ var yargs_yargs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(yargs_yargs__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\nlet addonPath = "", argv = yargs_yargs__WEBPACK_IMPORTED_MODULE_5___default()((0,yargs_helpers__WEBPACK_IMPORTED_MODULE_4__.hideBin)(process.argv)).argv, builtConfig = {}, hasProp = {}.hasOwnProperty;\n\nfunction nullish(what, def) {\n    return isNil(what) ? def : what;\n};\n\nfunction isNil(what) {\n    return typeof what === "undefined" || Object.is(what, null);\n}\n\nfunction resolveType(rawType, plural = true) {\n    switch (rawType.toLowerCase()) {\n        /* Themes */\n        case (plural && "theme"): return "themes";\n        case (plural && "themes"): return "themes";\n        case (!plural && "theme"): return "theme";\n        case (!plural && "themes"): return "theme";\n\n        /* Plugins */\n        case (plural && "plugin"): return "plugin";\n        case (plural && "plugins"): return "plugins";\n        case (!plural && "plugin"): return "plugin";\n        case (!plural && "plugins"): return "plugin";\n\n        default: throw new Error("Could not resolve " + rawType + " as addon type.");\n    }\n};\n\nfunction upperFirst(string) {\n    return string[0].toUpperCase() + string.slice(1);\n};\n\nfunction formatString(string, options, open = "{{", close = "}}") {\n    for (const option in options) {\n        string = string.replace(new RegExp(`\\\\${open}${option}\\\\${close}`, "g"), options[option]);\n    }\n\n    return string;\n};\n\nformatString.bind = string => {\n    string.format = Function.prototype.bind.call(formatString, string);\n    return string;\n};\n\nfunction resolveModule(mod) {\n    return path__WEBPACK_IMPORTED_MODULE_0___default().resolve(path__WEBPACK_IMPORTED_MODULE_0___default().join(__dirname, "..", "node_modules", mod));\n};\n\nfunction resolveRawGithub(pluginName, path) {\n    const {github} = getBuilderConfig();\n    return `https://raw.githubusercontent.com/${github.username}/${github.repo}/${github.branch}/${pluginName}/${path}`;\n};\n\nfunction nanoseconds() {\n    const hrTime = process.hrtime();\n    return hrTime[0] * 1000000000 + hrTime[1];\n};\n\nfunction init(addon, argvObj) {\n    const cfg = getBuilderConfig();\n    addonPath = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(process.cwd(), formatString(cfg.build.entry, {name: addon}, "[", "]"));\n    argv = argvObj;\n};\n\nfunction setBuiltConfig(cfg) {\n    builtConfig = cfg;\n};\n\nfunction getBuildConfig() {\n    return builtConfig;\n};\n\nfunction getPath() {\n    return addonPath;\n};\n\nfunction getAddonConfig(propetyPath = "") {\n    const config = fs_extra__WEBPACK_IMPORTED_MODULE_1___default().readJSONSync(path__WEBPACK_IMPORTED_MODULE_0___default().resolve(addonPath, "package.json"));\n    return propetyPath.split(".").reduce((cfg, item) => {\n        if (isNil(item) || isNil(cfg)) return cfg;\n        return item ? cfg[item] : cfg;\n    }, config);\n};\n\nfunction shouldWatch() {\n    const watch = getAddonConfig("build.watch");\n\n    return nullish(nullish(argv.watch, watch), false);\n};\n\nfunction readBuildConfig() {\n    const configPath = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(process.cwd(), argv.config ?? "bdbuilder.config.json");\n    try {\n        return fs_extra__WEBPACK_IMPORTED_MODULE_1___default().readJSONSync(configPath);\n    } catch (error) {\n        console.error(error);\n        throw new Error("Could not resolve build config at " + configPath);\n    }\n};\n\nfunction getBuilderConfig() {\n    let config = readBuildConfig();\n    if (hasProp.call(config, "extends")) {\n        if (Array.isArray(config.extends)) {\n            for (const cfg of config.extends) {\n                config = lodash__WEBPACK_IMPORTED_MODULE_3___default().merge(fs_extra__WEBPACK_IMPORTED_MODULE_1___default().readJSONSync(path__WEBPACK_IMPORTED_MODULE_0___default().resolve(process.cwd(), cfg)), config);\n            }\n        } else {\n            throw new Error("config.extends must be an array. Received " + typeof config.extends);\n        }\n    }\n\n    var c = lodash__WEBPACK_IMPORTED_MODULE_3___default().merge(_data_defaults_json__WEBPACK_IMPORTED_MODULE_2__, config);\n    return c;\n};\n\nconst Utils = {\n    resolveType,\n    upperFirst,\n    nullish,\n    formatString,\n    format: formatString,\n    resolveModule,\n    nanoseconds,\n    getAddonConfig,\n    init,\n    getPath,\n    setBuiltConfig,\n    getBuildConfig,\n    getBuilderConfig: getBuilderConfig,\n    resolveRawGithub,\n    startTime: nanoseconds(),\n    get argv() {return argv;},\n    get isRelease() {\n        return nullish(argv.release, getBuilderConfig().build.release);\n    },\n    get shouldWatch() {\n        return nullish(argv.watch, getBuilderConfig().build.watch);\n    },\n    get isProduction() {\n        return !this.isDevelopment;\n    },\n    get isDevelopment() {\n        return getBuilderConfig().build.hasOwnProperty("production") ? !getBuilderConfig().build.production :  null ?? (argv.dev || argv.development || !argv.prod || !argv.production);\n    }\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Utils);\n\n\n//# sourceURL=webpack://bdbuilder/./core/utils.js?')},dotenv:_=>{_.exports=require("dotenv")},"fs-extra":_=>{_.exports=require("fs-extra")},"js-beautify":_=>{_.exports=require("js-beautify")},lodash:_=>{_.exports=require("lodash")},module:_=>{_.exports=require("module")},path:_=>{_.exports=require("path")},sass:_=>{_.exports=require("sass")},"terser-webpack-plugin":_=>{_.exports=require("terser-webpack-plugin")},webpack:_=>{_.exports=require("webpack")},"yargs/helpers":_=>{_.exports=require("yargs/helpers")},"yargs/yargs":_=>{_.exports=require("yargs/yargs")}},__webpack_module_cache__={};function __webpack_require__(_){var e=__webpack_module_cache__[_];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[_]={exports:{}};return __webpack_modules__[_](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=_=>{var e=_&&_.__esModule?()=>_.default:()=>_;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(_,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(_,n)&&Object.defineProperty(_,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(_,e)=>Object.prototype.hasOwnProperty.call(_,e),__webpack_require__.r=_=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./core/index.js");module.exports=__webpack_exports__})();